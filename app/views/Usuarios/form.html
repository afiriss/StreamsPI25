#{extends 'main.html' /}
#{set title: u?.id ? 'Editar Usuário' : 'Criar Conta' /}

<form action="@{Usuarios.salvar()}" method="POST">
    <input type="hidden" name="u.id" value="${u?.id}">
    <h1>${u?.id ? 'Editar Perfil' : 'Crie sua conta'}</h1>

    #{ifErrors}
        <div class="alert alert-danger">
            #{errors}
                #{if error.key != 'u'}
                    <li>${error}</li>
                #{/if}
            #{/errors}
        </div>
    #{/ifErrors}

    <div class="mb-3">
        <input class="form-control" type="text" name="u.nome" value="${flash['u.nome'] ?: u?.nome}" placeholder="Nome Completo">
    </div>

    <div class="mb-3">
        <input class="form-control" type="email" name="u.email" value="${flash['u.email'] ?: u?.email}" placeholder="Endereço de e-mail">
    </div>

    <div class="mb-3">
        <input class="form-control" type="password" name="u.senha" value="" placeholder="Senha">
         #{if u?.id}<small class="form-text text-muted">Deixe em branco para não alterar</small>#{/if}
    </div>

    <div class="mb-3">
        <input class="form-control" type="password" name="confirmacaoSenha" value="" placeholder="Confirme a senha">
    </div>

    <div class="mb-3">
        <input class="form-control" type="text" name="u.telefone" value="${flash['u.telefone'] ?: u?.telefone}" placeholder="Telefone (Opcional)">
    </div>

    <button type="submit" class="btn btn-primary mt-3">${u?.id ? 'Salvar Alterações':'Criar Conta'}</button>
</form>